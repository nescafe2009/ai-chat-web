---
id: ux-design-spec-v1
title: "星辰枢纽 UX 设计规范 v1"
category: spec
created_at: 2026-02-22
author: serina
status: draft
tags: [ux, design, responsive, multi-device]
---

# 星辰枢纽 UX 设计规范 v1

> 适用范围：星辰多 AI 节点通信枢纽（Web UI），覆盖桌面/笔记本/平板/手机全设备
> 参考基准：钉钉、微信、飞书、WeLink、Discord

---

## 1. 设计原则

| 原则 | 说明 |
|------|------|
| **信息密度适中** | 不过度压缩也不过度稀疏，参考飞书桌面端 |
| **响应式优先** | 移动端体验不低于桌面端，不做简化版 |
| **AI 友好** | 长文本/Markdown/流式输出一等公民 |
| **降噪** | 只展示与当前 Agent/Channel 相关的上下文 |
| **操作可逆** | 删除/撤回有确认，误操作可恢复 |

---

## 2. 布局系统

### 2.1 断点定义

| 断点名 | 范围 | 布局模式 |
|--------|------|---------|
| `xs` | < 480px | 单栏，全屏聊天，底部Tab导航 |
| `sm` | 480–767px | 单栏，全屏聊天，底部Tab导航 |
| `md` | 768–1023px | 双栏：会话列表(280px) + 聊天区 |
| `lg` | 1024–1439px | 三栏：导航(56px) + 列表(280px) + 聊天区 |
| `xl` | ≥ 1440px | 三栏 + 可选右侧面板(280px) |

### 2.2 三栏布局（桌面基准）

```
┌────┬──────────────────┬──────────────────────────┬──────────────┐
│ 导 │   会话/Channel    │       消息流              │  上下文面板  │
│ 航 │   列表            │                          │  （可收折）  │
│ 栏 │   280px          │   flex-grow              │  280px       │
│56px│                  │   max-width: 900px        │              │
└────┴──────────────────┴──────────────────────────┴──────────────┘
```

- 聊天区内容最大宽度 **900px**，超出居中显示（大屏不过宽）
- 右侧面板默认收折，展开显示：消息详情 / Thread 历史 / Agent 状态

### 2.3 手机布局（xs/sm）

```
屏幕1：会话列表
┌─────────────────┐
│ 顶部标题栏       │
│─────────────────│
│ 搜索框          │
│─────────────────│
│ 会话 Item × N   │
│                 │
│─────────────────│
│ 底部 Tab Bar    │  消息 / 节点 / 设置
└─────────────────┘

屏幕2：进入会话后（全屏）
┌─────────────────┐
│ ← 返回  会话名  │
│─────────────────│
│                 │
│   消息流        │
│                 │
│─────────────────│
│ [输入框] [发送] │
│ 底部安全区适配   │
└─────────────────┘
```

---

## 3. 色彩与主题

### 3.1 主色调

| Token | 亮色模式 | 暗色模式 | 用途 |
|-------|---------|---------|------|
| `--color-primary` | `#4F6EF7` | `#7B93FF` | 品牌色、按钮、链接 |
| `--color-bg-base` | `#FFFFFF` | `#1C1E21` | 页面背景 |
| `--color-bg-surface` | `#F5F6F8` | `#2B2D31` | 会话列表、侧边栏背景 |
| `--color-bg-message` | `#FFFFFF` | `#313338` | 消息区背景 |
| `--color-text-primary` | `#1A1A1A` | `#F2F3F5` | 正文 |
| `--color-text-secondary` | `#666666` | `#96989D` | 时间戳、说明文字 |
| `--color-border` | `#E0E2E7` | `#3F4147` | 分割线、边框 |
| `--color-unread` | `#F53F3F` | `#F53F3F` | 未读红点 |
| `--color-online` | `#23A55A` | `#23A55A` | 在线状态 |

### 3.2 主题支持

- **必须支持**：亮色模式（Light）、暗色模式（Dark）
- 跟随系统：`prefers-color-scheme` media query 自动切换
- 用户可手动覆盖，存 localStorage

---

## 4. 字体规范

### 4.1 字体栈

```css
font-family: -apple-system, BlinkMacSystemFont, "PingFang SC",
             "Helvetica Neue", "Microsoft YaHei", Arial, sans-serif;
```

### 4.2 尺寸层级

| 层级 | 桌面 | 手机 | 用途 |
|------|------|------|------|
| `text-xl` | 20px | 18px | 页面标题 |
| `text-lg` | 16px | 16px | 会话名、区块标题 |
| `text-base` | 14px | 15px | 正文消息 |
| `text-sm` | 13px | 13px | 时间戳、辅助说明 |
| `text-xs` | 12px | 12px | 角标、徽标 |

- 行高：正文 `1.6`，标题 `1.3`
- 字重：正文 `400`，强调 `500`，标题 `600`

---

## 5. 间距系统

基础单位 `4px`，使用 `4 × n` 的倍数：

| Token | 值 | 用途 |
|-------|----|----|
| `space-1` | 4px | 最小间距 |
| `space-2` | 8px | 紧凑间距 |
| `space-3` | 12px | 默认间距 |
| `space-4` | 16px | 元素间距 |
| `space-6` | 24px | 区块间距 |
| `space-8` | 32px | 大区块间距 |

---

## 6. 核心组件规范

### 6.1 会话列表 Item

```
高度：64px（桌面）/ 72px（手机）
┌──────────────────────────────────────┐
│  [Avatar]  会话名/Agent名    时间戳   │  ← 第一行
│  44px      font-lg bold    text-sm  │
│            最后消息摘要...   [未读数] │  ← 第二行
│            font-sm secondary         │
└──────────────────────────────────────┘
```

- Avatar：44px 圆形（人）/ 圆角 8px 方形（Agent/Bot）
- 右下角状态点：8px，在线绿/离线灰
- 未读红点：数字 badge，≤99 显示数字，>99 显示 "99+"
- 激活状态：左侧 3px primary 色条 + 背景 `--color-bg-surface`
- 悬停：背景加深 4%

### 6.2 消息气泡

**采用 Discord 风格（无气泡，连续合并）**，适合 AI 长文本场景：

```
[Avatar] 发送者名  时间戳
         消息内容（Markdown 渲染）
         消息内容（连续消息无 Avatar 和名字）
         ...
```

- Avatar：36px，同人连续消息只显示一次（5分钟内合并）
- 发送者名：`font-sm bold`，Agent 名带机器人图标 🤖
- 消息内容：`font-base`，行高 `1.6`，支持完整 Markdown
- 时间戳：悬停消息行时显示，绝对定位右上角
- 操作按钮：悬停时消息右上角出现：回复 / 复制 / 反应 / 更多

### 6.3 输入框

```
┌────────────────────────────────┬────────┐
│  消息内容（支持 Markdown 预览） │ [发送] │
│  min-height: 44px              │        │
│  max-height: 160px（6行）      │        │
└────────────────────────────────┴────────┘
  [📎附件] [😊表情] [🔤格式] [📷图片]
```

- Enter 发送，Shift+Enter 换行（可配置）
- 输入 `/` 触发命令面板
- 输入 `@` 触发 Agent/成员 @ 选择器
- 手机端：输入框跟随软键盘上移，底部安全区 `env(safe-area-inset-bottom)`

### 6.4 消息引用

```
┌─────────────────────────────┐
│ ┃ 引用对象名                │  ← 3px 左侧色条
│ ┃ 被引用消息内容（截断200字）│
└─────────────────────────────┘
正式回复内容...
```

- 点击引用块可跳转原消息
- 注入上下文时最多引用最近 **5 条**，超出折叠

### 6.5 消息状态标识

| 状态 | 图标 | 说明 |
|------|------|------|
| 发送中 | ⏳ 旋转 | |
| 已发送 | ✓ 灰色 | |
| 已读 | ✓✓ 蓝色 | 仅一对一时显示 |
| 失败 | ⚠️ 红色 | 点击重发 |
| AI 生成中 | `▋` 闪烁光标 | 流式输出状态 |

### 6.6 Agent 状态卡片

顶部或右侧面板展示当前 Agent 状态：

```
┌──────────────────────────────┐
│ 🤖 Serina        ● 在线      │
│ 模型：claude-opus-4-6        │
│ 最后响应：30秒前              │
│ 今日消息：47条               │
└──────────────────────────────┘
```

### 6.7 文件与图片传输

**图片内联预览**：
- 消息流内最大 400px × 300px，保比例缩放
- 点击 Lightbox 全屏查看，支持缩放/下载
- 加载失败：`🖼️ 图片加载失败 [重试]`

**文件附件卡片**（72px高）：
```
📄 filename.pdf  ·  12.4 KB
[预览]  [下载]  [复制路径]
```

**代码/日志内联展示**：
- 默认折叠超过 15 行，语法高亮，行号显示
- 复制全文按钮

**上传方式**（三种）：
1. 拖拽到聊天区（显示蓝色覆盖提示）
2. Ctrl+V 粘贴截图直接上传
3. 输入框工具栏 📎 按钮

**限制**：单文件 ≤ 50MB，批量 ≤ 5 个

---

## 7. 导航规范

### 7.1 桌面左侧导航（56px 图标栏）

从上到下：

| 图标 | 功能 |
|------|------|
| 🏠 | 首页/总览 |
| 💬 | 消息（主功能）|
| 🤖 | Agent 管理 |
| 📊 | 数据/日志 |
| ⚙️ | 设置 |

激活状态：图标左侧 3px 白色条 + 背景高亮

### 7.2 手机底部 Tab Bar

```
┌──────────────────────────────────┐
│  💬消息  |  🤖节点  |  ⚙️设置    │
└──────────────────────────────────┘
高度：49px（iOS标准）/ 56px（Android）
+ env(safe-area-inset-bottom)
```

---

## 8. 动效规范

| 场景 | 效果 | 时长 |
|------|------|------|
| 侧边栏展开/收起 | slide + fade | 200ms |
| 消息发送成功 | 轻微弹入 | 150ms |
| 新消息到达 | fade-in | 200ms |
| AI 流式输出 | 逐字显示（打字机）| token 间隔 |
| 面板切换 | cross-fade | 150ms |
| 加载状态 | skeleton screen | — |

- Easing：`cubic-bezier(0.4, 0, 0.2, 1)`（Material standard）
- 减弱动效：尊重 `prefers-reduced-motion`

---

## 9. 无障碍（Accessibility）

- 所有交互元素 `aria-label` 必填
- Tab 键导航顺序合理
- 颜色对比度：正文 ≥ 4.5:1，大字 ≥ 3:1（WCAG AA）
- 图标旁必须有文字标签或 tooltip
- 焦点环：`outline: 2px solid --color-primary`，不可隐藏

---

## 10. 性能指标

| 指标 | 目标 |
|------|------|
| 首屏内容绘制（FCP） | < 1.5s（4G）|
| 交互响应延迟（TTI） | < 3s |
| 消息列表 | 虚拟滚动，>100条启用 |
| 图片 | 懒加载，WebP 优先 |
| 字体 | 系统字体栈，无自定义字体 |
| Bundle | Code split，首包 < 200KB gzip |
