---
id: ux-research-messaging-apps-v1
title: "主流通信 App UX 设计规范调研 v1"
category: research
created_at: 2026-02-22
author: serina
status: draft
---

# 主流通信 App UX 设计规范调研 v1

> 目标：为星辰枢纽新 UX 设计提供参考基线，覆盖多设备（桌面/笔记本/平板/手机）响应式规范

---

## 1. 布局结构对比

### 三栏经典布局（主流）

```
┌──────┬────────────────┬────────────────┐
│ Nav  │  会话列表       │   聊天主区域    │
│ 48px │  240-320px     │   flex-grow    │
└──────┴────────────────┴────────────────┘
```

| App     | 左导航     | 会话列表宽度 | 聊天区最大宽度 | 备注 |
|---------|-----------|------------|--------------|------|
| Discord | 72px 图标栏 | 240px      | 无限制        | 4 栏：服务器/频道/成员/聊天 |
| 飞书     | 56px      | 280px      | ~900px       | 右侧可展开文档面板 |
| 钉钉     | 64px      | 300px      | ~800px       | 消息/文档/视频会议分 tab |
| 微信     | 无独立导航  | 240px      | ~700px       | 简洁，左右两栏 |
| WeLink  | 56px      | 260px      | ~850px       | 华为风格，功能区更紧凑 |

### 响应式断点规律

```
< 768px   (手机)    → 单栏，全屏聊天，侧滑返回会话列表
768-1024px (平板)   → 双栏：会话列表 + 聊天区；导航收折为底栏
1024-1440px (笔记本) → 三栏完整展示；侧边栏可收起
> 1440px  (桌面)    → 三栏 + 可选右侧面板（成员/文件/详情）
```

---

## 2. 核心 UI 组件规范

### 2.1 消息气泡

| 规范项 | 钉钉/飞书/微信 | Discord |
|-------|--------------|---------|
| 自己消息 | 右对齐，主色背景 | 左对齐（无气泡，连续消息合并） |
| 他人消息 | 左对齐，白/灰背景 | 左对齐，带 Avatar |
| 最大宽度 | 消息区 70% | 消息区 85% |
| 圆角     | 12-16px      | 0（无气泡） |
| 时间戳   | 悬浮显示或行尾 | 消息左侧（Discord 特色） |
| 连续消息合并 | 部分支持 | 完全支持（同人同分钟合并） |

**最佳实践：** AI agent 场景建议采用 Discord 风格（连续消息合并 + 无气泡），视觉更清晰，适合长文本。

### 2.2 输入框

| 规范项 | 推荐值 |
|-------|--------|
| 默认高度 | 44-52px（单行）|
| 多行展开 | 最大 6 行，超出滚动 |
| 底部内边距 | 手机底部安全区适配（env(safe-area-inset-bottom)）|
| @ 提及 | 输入 @ 触发成员选择器 |
| 快捷键 | Enter 发送，Shift+Enter 换行（可配置）|
| 工具栏 | 表情/文件/图片/代码块（按需精简）|

### 2.3 会话列表 Item

```
┌─────────────────────────────────┐
│ [Avatar] 会话名          时间    │
│          最后一条消息    未读数  │
└─────────────────────────────────┘
```

- Avatar：40-48px，圆形（人）/ 圆角方形（群/机器人）
- 未读红点：数字 ≤99，超出显示 99+
- 悬停高亮：背景色加深 8%
- 激活状态：左侧 3px 色条 或 背景填充

---

## 3. 多设备适配策略

### 手机端关键适配

1. **底部导航栏**（Tab Bar）替代左侧导航：消息/通讯录/工作台/我
2. **全屏聊天**：进入会话后隐藏列表，顶部返回箭头
3. **输入框上推**：键盘弹出时 viewport resize，输入框贴键盘顶部
4. **手势操作**：右滑返回（iOS），长按消息气泡触发操作菜单
5. **字体**：正文 15-16px（手机）/ 14px（桌面），行高 1.5-1.6

### 平板端关键适配

1. 双栏 Split View：左栏固定 320px，右栏 flex
2. 横屏强制双栏，竖屏根据宽度判断
3. 外接键盘支持：快捷键映射

### 桌面端关键适配

1. 三栏完整布局，支持面板收折
2. 右键上下文菜单（消息操作）
3. 窗口最小宽度建议 768px
4. 大屏聊天区内容最大宽度限制（~900px），居中显示

---

## 4. 通知与消息状态

| 状态     | 表示方式 |
|---------|---------|
| 发送中   | 消息末尾旋转图标 |
| 已发送   | ✓（单对勾）|
| 已读     | ✓✓（双对勾，蓝色）/ 微信不显示 |
| 发送失败 | 红色感叹号，点击重发 |
| 撤回     | "消息已撤回" 占位文本 |

---

## 5. 颜色与主题

### 主流配色方案

| App     | 主色          | 背景色（亮）  | 暗黑模式 |
|---------|-------------|------------|---------|
| Discord | #5865F2（靛紫）| #FFFFFF    | ✅ 深灰系 |
| 飞书     | #1456F0（蓝）  | #F5F6F7    | ✅ |
| 钉钉     | #3296FA（蓝）  | #F0F0F0    | ✅ |
| 微信     | #07C160（绿）  | #EDEDED    | ✅ |
| WeLink  | #CC0000（红）  | #F5F5F5    | 部分 |

**AI 助手场景建议：** 蓝紫色系（科技感）+ 深色模式优先，参考 Discord 调色板。

---

## 6. AI/Bot 场景特殊规范

Discord、飞书、钉钉都有 Bot/机器人的特殊 UI 规范：

1. **身份标识**：Bot Avatar 右下角显示小机器人图标
2. **Embed/Card**：结构化回复用 Card 展示（有边框/标题/字段列表）
3. **Markdown 渲染**：加粗/斜体/代码块/列表/链接 全支持
4. **流式输出**：打字机效果（token by token），Discord Nitro / 飞书 AI 都有实现
5. **操作按钮**：消息下方 inline 按钮（Discord Components，飞书卡片 Actions）
6. **消息引用**：回复某条消息时显示引用上文片段

---

## 7. 性能与加载

| 指标 | 推荐 |
|-----|------|
| 首屏加载 | < 2s（4G 网络）|
| 消息列表虚拟滚动 | 超过 100 条启用，只渲染视口内 |
| 图片懒加载 | 进入视口前不加载 |
| 离线支持 | Service Worker 缓存（飞书/钉钉都有）|
| 字体 | 系统字体栈（避免自定义字体增加 FCP）|

---

## 8. 对星辰枢纽 UX 的具体建议

基于以上调研，结合我们的 **channel 化 + 消除 session split + 降 token** 目标：

### 布局建议
- **桌面三栏**：左侧 Agent 列表（Serina/Cortana/Roland）+ 中间消息流 + 右侧上下文面板（可收折）
- **手机双栏退化**：Agent 列表为首页，进入会话后全屏
- **会话列表 Item**：显示 Agent 名 + 最后一条消息摘要 + 未读数 + channel 来源标签

### 消息流建议
- **Discord 风格无气泡**：适合长文本 AI 回复，连续消息合并减少视觉噪声
- **Channel 来源标签**：每条消息显示来源（serina:messages / boss / nexus）
- **引用式上下文**：回复时只注入被引用消息片段，不注入完整历史（降 token）
- **流式输出**：打字机效果，提升响应感知

### Token 降低策略（UX 层面）
- 引用上下文最多显示最近 5 条，超出折叠为"查看更多"
- 长消息截断预览（200字），点击展开全文
- Thread/话题分组：同一话题的消息归为一组，注入时按 thread 取样而非全量

---

## 参考资料

- Discord Design Guidelines (内部文档)
- 飞书开放平台消息卡片规范：https://open.feishu.cn/document/ukTMukTMukTM/uEjNwUjLxYDM14SM2ATN
- 钉钉开放平台消息卡片规范：https://open.dingtalk.com/document/orgapp/overview-of-dingtalk-message-cards
- Material Design 3 Navigation 规范：https://m3.material.io/components/navigation-drawer
- iOS Human Interface Guidelines - Messages：https://developer.apple.com/design/human-interface-guidelines
